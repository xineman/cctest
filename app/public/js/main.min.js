webpackJsonp([1],{100:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(u),i=n(9),s=n(14),f=n(20),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return c.default.createElement("form",{className:"form"},c.default.createElement("div",{className:"form__block"},c.default.createElement("label",{className:"form__label",htmlFor:"username"},"Username:"),c.default.createElement("input",{className:"form__input",id:"username",type:"text",placeholder:"Enter username"})),c.default.createElement("div",{className:"form__block"},c.default.createElement("label",{className:"form__label",htmlFor:"password"},"Password:"),c.default.createElement("input",{className:"form__input",id:"password",type:"password",placeholder:"Enter password"})),c.default.createElement("div",{className:"popup__buttons"},c.default.createElement("p",{className:"form__button header__btn",onClick:function(){return e.props.sign()}},"Login"),c.default.createElement("p",{className:"form__text"},"or"),c.default.createElement("p",{className:"form__button header__btn",onClick:function(){return e.props.sign(!0)}},"Register")))}}]),t}(c.default.Component),d=function(e,t){return{sign:function(t){var n=document.getElementById("username").value,r=document.getElementById("password").value,a="http://"+window.location.host+"/login";t&&(a="http://"+window.location.host+"/register"),(0,f.ajax)(a,"POST",{username:n,password:r}).then(function(t){var n=JSON.parse(t);n.error?alert(n.error):e((0,s.setState)(n))}).catch(function(e){return console.log(e)})}}},_=(0,i.connect)(null,d)(p);t.default=_},101:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(u),i=n(9),s=n(14),f=n(20),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"popup remove-popup",onClick:function(t){return e.props.close(t)}},c.default.createElement("div",{className:"popup__wrapper remove-popup__wrapper"},c.default.createElement("h3",{className:"popup__title"},"Remove event?"),c.default.createElement("div",{className:"popup__buttons"},c.default.createElement("p",{className:"header__btn",onClick:function(){return e.props.remove()}},"Remove"),c.default.createElement("p",{className:"header__btn popup__close"},"Cancel"))))}}]),t}(c.default.Component),d=function(e,t){return{remove:function(){(0,f.ajax)("http://"+window.location.host+"/remove","POST",{removeId:t.removeId}).then(function(t){e((0,s.setState)({removeId:null,showRemovePopup:!1,events:JSON.parse(t)}))})},close:function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close"))&&e((0,s.setState)({removeId:null,showRemovePopup:!1}))}}},_=(0,i.connect)(null,d)(p);t.default=_},102:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),c=n(14),i=(n(20),n(6)),s=function(e){return e&&e.__esModule?e:{default:e}}(i),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return s.default.createElement("nav",{className:"header__nav"},s.default.createElement("p",{className:"header__btn",onClick:function(){return e.props.export()}},"Export"),s.default.createElement("p",{className:"header__btn",onClick:function(){return e.props.add()}},"Add"),s.default.createElement("p",{className:"header__btn",onClick:function(){return e.props.logout()}},"Logout"))}}]),t}(s.default.Component),p=function(e,t){return{logout:function(){window.location.replace("/logout")},export:function(){window.location.href="/export"},add:function(){e((0,c.setState)({showAddPopup:!0}))}}},d=(0,u.connect)(null,p)(f);t.default=d},103:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(6),o=r(a),l=n(33),u=n(26),c=n(9),i=n(95),s=r(i),f=n(96),p=r(f),d=window.__PRELOADED_STATE__;delete window.__PRELOADED_STATE__;var _=(0,u.createStore)(p.default,d);(0,l.render)(o.default.createElement(c.Provider,{store:_},o.default.createElement(s.default,null)),document.getElementById("root"))},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setState=function(e){return{type:"SET_STATE",state:e}},t.setNewEvent=function(e){return{type:"SET_NEWEVENT",event:e}}},20:function(e,t,n){"use strict";function r(e,t,n){return new Promise(function(r,a){var o=new XMLHttpRequest;o.open(t,e,!0),o.setRequestHeader("Content-Type","application/json"),n?o.send(JSON.stringify(n)):o.send(),o.onreadystatechange=function(){4==this.readyState&&(200==this.status?r(this.responseText):a({error:"Request failed",url:e}))}})}Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=r},95:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(6),i=r(c),s=n(9),f=n(102),p=r(f),d=n(100),_=r(d),m=n(98),h=r(m),v=n(101),y=r(v),b=n(97),E=r(b),w=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){return i.default.createElement("main",null,i.default.createElement("header",{className:"header"},i.default.createElement("h1",{className:"header__title"},"Calendar"),this.props.username&&i.default.createElement(p.default,{events:this.props.events})),this.props.username&&i.default.createElement("p",{className:"header__descr"},'Click "Add" to add new event, "Export" to export all your events as JSON, or click the event to remove it.'),this.props.username&&i.default.createElement(h.default,{events:this.props.events}),!this.props.username&&i.default.createElement(_.default,null),this.props.showRemovePopup&&i.default.createElement(y.default,{removeId:this.props.removeId}),this.props.showAddPopup&&i.default.createElement(E.default,{newEvent:this.props.newEvent}))}}]),t}(i.default.Component),N=function(e){return{username:e.username,events:e.events,showRemovePopup:e.showRemovePopup,showAddPopup:e.showAddPopup,removeId:e.removeId,newEvent:e.newEvent}},O=(0,s.connect)(N)(w);t.default=O},96:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case"SET_STATE":return a({},e,t.state);case"SET_NEWEVENT":return a({},e,{newEvent:a({},e.newEvent,t.event)})}return e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={username:null,events:[{id:"0",title:"My first event!",start:"1",duration:"1"}],layout:null,newEvent:{title:"",start:"",end:""}};t.default=r},97:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(u),i=n(9),s=n(14),f=n(20),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"popup add-popup",onClick:function(t){return e.props.close(t)}},c.default.createElement("div",{className:"popup__wrapper add-popup__wrapper"},c.default.createElement("h3",{className:"popup__title"},"New event"),c.default.createElement("form",null,c.default.createElement("div",{className:"form__block"},c.default.createElement("label",{className:"form__label"},"Title"),c.default.createElement("input",{id:"event__title",type:"text",className:"form__input",placeholder:"Event title",onChange:function(t){return e.props.change(t)},value:this.props.newEvent.title})),c.default.createElement("div",{className:"form__block"},c.default.createElement("label",{className:"form__label"},"Start time:"),c.default.createElement("input",{id:"event__start",type:"text",className:"form__input",placeholder:"8:00",onChange:function(t){return e.props.change(t)},value:this.props.newEvent.start})),c.default.createElement("div",{className:"form__block"},c.default.createElement("label",{className:"form__label"},"End time:"),c.default.createElement("input",{id:"event__end",type:"text",className:"form__input",placeholder:"8:30",onChange:function(t){return e.props.change(t)},value:this.props.newEvent.end})),c.default.createElement("div",{className:"popup__buttons"},c.default.createElement("p",{className:"header__btn",onClick:function(){return e.props.create()}},"Create"),c.default.createElement("p",{className:"header__btn popup__close"},"Cancel")))))}}]),t}(c.default.Component),d=function(e){return{newEvent:e.newEvent}},_=function(e,t){return{create:function(){var n=t.newEvent.start.split(":");n=60*(parseInt(n[0])-8)+parseInt(n[1]);var r=t.newEvent.end.split(":");r=60*(parseInt(r[0])-8)+parseInt(r[1]),isNaN(n)||isNaN(r)||r<n?alert("Check your fields and try again!"):(0,f.ajax)("http://"+window.location.host+"/add","POST",{event:{title:t.newEvent.title,start:n,duration:r-n}}).then(function(t){e((0,s.setState)({showAddPopup:!1,events:JSON.parse(t)}))})},change:function(t){switch(t.target.id){case"event__title":e((0,s.setNewEvent)({title:t.target.value}));break;case"event__start":e((0,s.setNewEvent)({start:t.target.value}));break;case"event__end":e((0,s.setNewEvent)({end:t.target.value}))}},close:function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close"))&&e((0,s.setState)({showAddPopup:!1}))}}},m=(0,i.connect)(d,_)(p);t.default=m},98:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(6),i=r(c),s=n(99),f=r(s),p=n(9),d=n(14),_=(n(20),function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"componentWillUpdate",value:function(e,t){e.events!=this.props.events&&this.props.setupLayout(e.events)}},{key:"render",value:function(){return i.default.createElement("article",{className:"calendar"},i.default.createElement("ul",{className:"calendar__timeline"},i.default.createElement("li",{className:"calendar__time"},"8:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"8:30"),i.default.createElement("li",{className:"calendar__time"},"9:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"9:30"),i.default.createElement("li",{className:"calendar__time"},"10:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"10:30"),i.default.createElement("li",{className:"calendar__time"},"11:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"11:30"),i.default.createElement("li",{className:"calendar__time"},"12:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"12:30"),i.default.createElement("li",{className:"calendar__time"},"1:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"1:30"),i.default.createElement("li",{className:"calendar__time"},"2:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"2:30"),i.default.createElement("li",{className:"calendar__time"},"3:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"3:30"),i.default.createElement("li",{className:"calendar__time"},"4:00"),i.default.createElement("li",{className:"calendar__time calendar__time_small"},"4:30"),i.default.createElement("li",{className:"calendar__time calendar__time_last"},"5:00")),i.default.createElement("div",{className:"calendar__events-container"},i.default.createElement("ul",{className:"calendar__hours"},i.default.createElement("li",{className:"calendar__hour"}),i.default.createElement("li",{className:"calendar__hour"}),i.default.createElement("li",{className:"calendar__hour"})),i.default.createElement("ul",{className:"calendar__events"},this.props.layout&&this.props.events.map(function(e){return i.default.createElement(f.default,{key:e._id,duration:e.duration,start:e.start,title:e.title,_id:e._id})}))))}}]),t}(i.default.Component)),m=function(e){return{events:e.events,layout:e.layout}},h=function(e,t){return{setupLayout:function(t){for(var n=[],r=0;r<540;r++){var a;!function(){var e=t.filter(function(e){return e.start<=r&&e.start+e.duration-1>=r});if(e.length>1)for(a=0;a<e.length;a++){var o=n.find(function(t){return t.id==e[a]._id});(!o||o.width>1/e.length)&&(n=n.filter(function(t){return t.id!=e[a]._id}),n.push({id:e[a]._id,order:a,width:1/e.length}))}}()}e((0,d.setState)({layout:n}))}}},v=(0,p.connect)(m,h)(_);t.default=v},99:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=function(e){return e&&e.__esModule?e:{default:e}}(u),i=n(9),s=n(14),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this;return c.default.createElement("li",{style:{width:this.props.layout?100*this.props.layout.width+"%":"",left:this.props.layout?this.props.layout.width*this.props.layout.order*100+"%":"",height:2*this.props.duration+"px",top:2*this.props.start+"px"},onClick:function(){return e.props.eventClick()},"data-start":"8:00","data-end":"9:00","data-text":this.props.title,className:"calendar__event"},c.default.createElement("span",null,this.props.title))}}]),t}(c.default.Component),p=function(e,t){return{layout:e.layout?e.layout.find(function(e){return e.id==t._id}):null}},d=function(e,t){return{eventClick:function(){e((0,s.setState)({removeId:t._id,showRemovePopup:!0}))}}},_=(0,i.connect)(p,d)(f);t.default=_}},[103]);